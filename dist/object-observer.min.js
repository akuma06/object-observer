(()=>{"use strict";const e=this||window,t=new Map,o=new WeakMap,r=new WeakMap,n={Date:!0,Blob:!0,Number:!0,String:!0,Boolean:!0,Error:!0,SyntaxError:!0,TypeError:!0,URIError:!0,Function:!0,Promise:!0,RegExp:!0};function l(e){return n.hasOwnProperty(e.constructor.name)}function i(e,n){let l,i=o.get(e),f=r.get(i.root);return l="pop"===n?function(){let r,l,s;return r=e.length-1,l=Reflect.apply(e[n],e,arguments),(s=t.get(l))&&o.get(s).revoke(),f.notify([new y(i.path.concat(r),s||l)]),s||l}:"push"===n?function(){let t,o,r,l=[];t=Array.from(arguments),r=e.length;for(let e,o=0,n=t.length;o<n;o++)(e=t[o])&&"object"==typeof e&&(t[o]=new c(e,r+o,i).proxy),l.push(new p(i.path.concat(r+o),e));return o=Reflect.apply(e[n],e,t),f.notify(l),o}:"shift"===n?function(){let r,l;r=Reflect.apply(e[n],e,arguments),(l=t.get(r))&&o.get(l).revoke();for(let r,n,l=0,i=e.length;l<i;l++)(r=e[l])&&"object"==typeof r&&((n=o.get(t.get(r)))?n.ownKey=l:console.error("unexpectedly failed to resolve proxy -> target -> observed"));return f.notify([new y(i.path.concat(0),l||r)]),l||r}:"unshift"===n?function(){let r,l,s,a=[];(r=Array.from(arguments)).forEach((e,t)=>{e&&"object"==typeof e&&(r[t]=new c(e,t,i).proxy)}),l=Reflect.apply(e[n],e,r);for(let r,n=0,l=e.length;n<l;n++)(r=e[n])&&"object"==typeof r&&((s=o.get(t.get(r)))?s.ownKey=n:console.error("failed to resolve proxy -> target -> observed"));for(let t=0,o=r.length;t<o;t++)a.push(new p(i.path.concat(t),e[t]));return f.notify(a),l}:"reverse"===n?function(){let r;Reflect.apply(e[n],e,arguments);for(let n,l=0,i=e.length;l<i;l++)(n=e[l])&&"object"==typeof n&&((r=o.get(t.get(n)))?r.ownKey=l:console.error("failed to resolve proxy -> target -> observed"));return f.notify([new function(){this.type="reverse"}]),this}:"sort"===n?function(){let r;Reflect.apply(e[n],e,arguments);for(let n,l=0,i=e.length;l<i;l++)(n=e[l])&&"object"==typeof n&&((r=o.get(t.get(n)))?r.ownKey=l:console.error("failed to resolve proxy -> target -> observed"));return f.notify([new function(){this.type="shuffle"}]),this}:"fill"===n?function(){let r,l,s,a=[],y=arguments.length,u=e.length;r=y<2?0:arguments[1]<0?u+arguments[1]:arguments[1],l=y<3?u:arguments[2]<0?u+arguments[2]:arguments[2],s=e.slice(),Reflect.apply(e[n],e,arguments);for(let n,f,y=r;y<l;y++)(n=e[y])&&"object"==typeof n&&(e[y]=new c(n,y,i).proxy),s.hasOwnProperty(y)?((f=t.get(s[y]))&&o.get(f).revoke(),a.push(new h(i.path.concat(y),e[y],f||s[y]))):a.push(new p(i.path.concat(y),e[y]));return f.notify(a),this}:"splice"===n?function(){let r,l,s,a,u,b,g,v,w=[],d=e.length;g=(r=Array.from(arguments)).length;for(let e,t=0;t<g;t++)e=r[t],t>1&&e&&"object"==typeof e&&(r[t]=new c(e,t,i).proxy);a=0===g?0:r[0]<0?d+r[0]:r[0],u=g<2?d-a:r[1],b=Math.max(g-2,0),l=Reflect.apply(e[n],e,r),d=e.length;for(let r,n=0;n<d;n++)(r=e[n])&&"object"==typeof r&&((s=o.get(t.get(r)))?s.ownKey=n:console.error("failed to resolve proxy -> target -> observed"));for(let e,r,n=0,i=l.length;n<i;n++)e=l[n],(r=t.get(e))&&(o.get(r).revoke(),l[n]=r);for(v=0;v<u;v++)v<b?w.push(new h(i.path.concat(a+v),e[a+v],l[v])):w.push(new y(i.path.concat(a+v),l[v]));for(;v<b;v++)w.push(new p(i.path.concat(a+v),e[a+v]));return f.notify(w),l}:Reflect.get(e,n)}function f(e,n,i){let f,s,a=e.hasOwnProperty(n),y=e[n],u=o.get(e),b=r.get(u.root);if((f=i&&"object"==typeof i&&!l(i)?Reflect.set(e,n,new c(i,n,u).proxy):Reflect.set(e,n,i))&&((s=t.get(y))&&o.get(s).revoke(),b.hasListeners()&&!u.preventCallbacks)){let e=u.path.concat(n);b.notify([a?new h(e,i,s||y):new p(e,i)])}return f}function s(e,n){let l,i,f=e[n],s=o.get(e),c=r.get(s.root);if((l=Reflect.deleteProperty(e,n))&&((i=t.get(f))&&o.get(i).revoke(),c.hasListeners()&&!s.preventCallbacks)){let e=s.path.concat(n);c.notify([new y(e,i||f)])}return l}function c(e,r,n){let a=(p=e,Array.isArray(p)?p.slice():Object.assign({},p));var p;Array.isArray(a)?(!function(e,t){let o,r=e.length;for(;r--;)(o=e[r])&&"object"==typeof o&&!l(o)&&(e[r]=new c(o,r,t).proxy)}(a,this),this.revokable=Proxy.revocable(a,{set:f,get:i,deleteProperty:s})):(!function(e,t){let o,r,n=Object.keys(e),i=n.length;for(;i--;)(r=e[o=n[i]])&&"object"==typeof r&&!l(r)&&(e[o]=new c(r,o,t).proxy)}(a,this),this.revokable=Proxy.revocable(a,{set:f,deleteProperty:s})),this.targetClone=a,this.proxy=this.revokable.proxy,this.ownKey=r,this.parent=n,o.set(a,this),t.set(this.proxy,a)}function a(e){let t=!1,o=[];this.hasListeners=function(){return o.length>0},this.notify=function(e){for(let t,r=0,n=o.length;r<n;r++){t=o[r];try{t(e)}catch(e){console.error("one/some of the observing callbacks failed with ",e)}}},e.targetClone.observe=function(e){if(t)throw new TypeError("revoked Observable MAY NOT be observed anymore");if("function"!=typeof e)throw new Error("observer (callback) parameter MUST be a function");o.indexOf(e)<0?o.push(e):console.info("observer (callback) may be bound to an observable only once")},e.targetClone.unobserve=function(){if(t)throw new TypeError("revoked Observable MAY NOT be unobserved anymore");if(arguments.length)for(let e,t=0,r=arguments.length;t<r;t++)(e=o.indexOf(arguments[t]))>=0&&o.splice(e,1);else o.splice(0,o.length)},e.targetClone.revoke=function(){t?console.log("revoking of Observable effective only once"):(t=!0,e.revoke())}}function p(e,t){this.type="insert",this.path=e,this.value=t}function h(e,t,o){this.type="update",this.path=e,this.value=t,this.oldValue=o}function y(e,t){this.type="delete",this.path=e,this.oldValue=t}Object.defineProperty(c.prototype,"root",{get:function(){let e=this;for(;e.parent;)e=e.parent;return e}}),Object.defineProperty(c.prototype,"path",{get:function(){let e=[],t=this;for(;void 0!==t.ownKey;)e.unshift(t.ownKey),t=t.parent;return e}}),Object.defineProperty(c.prototype,"revoke",{value:function(){let e=t.get(this.proxy),r=Object.keys(e);this.revokable.revoke();for(let n,l,i=0,f=r.length;i<f;i++)n=r[i],(l=t.get(e[n]))&&(e[n]=o.get(l).revoke());return t.delete(this.proxy),o.delete(e),e}}),Object.defineProperty(a,"from",{value:function(e){if(!(!e||"object"!=typeof e||l(e)||"observe"in e||"unobserve"in e||"revoke"in e)){let t=new c(e),o=new a(t);return r.set(t,o),t.proxy}if(!e||"object"!=typeof e)throw new Error("observable MAY ONLY be created from non-null object only");if("observe"in e||"unobserve"in e||"revoke"in e)throw new Error('target object MUST NOT have nor own neither inherited properties from the following list: "observe", "unobserve", "revoke"');if(l(e))throw new Error(e+" found to be one of non-observable object types: "+n)}}),Object.defineProperty(e,"Observable",{value:a})})();