(()=>{"use strict";const e=this||window,t=new Map,r={Date:!0,Blob:!0,Number:!0,String:!0,Boolean:!0,Error:!0,SyntaxError:!0,TypeError:!0,URIError:!0,Function:!0,Promise:!0,RegExp:!0};class o extends Array{constructor(e,t){super(e.length);let o,n=e.length;for(;n--;)(o=e[n])&&"object"==typeof o&&!r.hasOwnProperty(o.constructor.name)?this[n]=new s({target:o,ownKey:n,parent:t}).proxy:this[n]=o}revoke(){t.get(this).revoke()}observe(e){t.get(this).observe(e)}unobserve(){let e=t.get(this);e.unobserve.apply(e,arguments)}}class n{constructor(e,t){let o,n,l=Object.getOwnPropertyNames(e),i=l.length;for(;i--;)(n=e[o=l[i]])&&"object"==typeof n&&!r.hasOwnProperty(n.constructor.name)?this[o]=new s({target:n,ownKey:o,parent:t}).proxy:this[o]=n}revoke(){t.get(this).revoke()}observe(e){t.get(this).observe(e)}unobserve(){let e=t.get(this);e.unobserve.apply(e,arguments)}}function s(e){this.parent=e.parent,this.ownKey=e.ownKey;let r,s=e.target;Array.isArray(s)?(r=new o(s,this),this.revokable=Proxy.revocable(r,{deleteProperty:this.proxiedDelete.bind(this),set:this.proxiedSet.bind(this),get:this.proxiedArrayGet.bind(this)})):(r=new n(s,this),this.revokable=Proxy.revocable(r,{deleteProperty:this.proxiedDelete.bind(this),set:this.proxiedSet.bind(this)})),null===this.parent&&(this.isRevoked=!1,this.callbacks=[],this.observe=function(e){if(this.isRevoked)throw new TypeError("revoked Observable MAY NOT be observed anymore");if("function"!=typeof e)throw new Error("observer (callback) parameter MUST be a function");this.callbacks.indexOf(e)<0?this.callbacks.push(e):console.info("observer (callback) may be bound to an observable only once")},this.unobserve=function(){if(this.isRevoked)throw new TypeError("revoked Observable MAY NOT be unobserved anymore");let e=arguments.length;if(e)for(;e--;){let t=this.callbacks.indexOf(arguments[e]);t>=0&&this.callbacks.splice(t,1)}else this.callbacks.splice(0)}),this.target=r,this.proxy=this.revokable.proxy,t.set(this.proxy,this)}s.prototype.getPath=function(){let e=[],t=[],r=0,o=0,n=this;for(;null!==n.ownKey;)e[r++]=n.ownKey,n=n.parent;for(;r--;)t[o++]=e[r];return t},s.prototype.getListeners=function(){let e=this;for(;e.parent;)e=e.parent;return e.callbacks},s.prototype.callListeners=function(e,t){let r=e.length;for(;r--;)try{e[r](t)}catch(e){console.error(e)}},s.prototype.revoke=function(){let e,r,o,n=this.target,s=Object.keys(n),l=s.length;for(this.revokable.revoke();l--;)(r=n[e=s[l]])&&"object"==typeof r&&(o=t.get(r))&&(n[e]=o.revoke());return t.delete(this.proxy),n},s.prototype.proxiedSet=function(e,o,n){let l=e[o];if(n&&"object"==typeof n&&!r.hasOwnProperty(n.constructor.name)?e[o]=new s({target:n,ownKey:o,parent:this}).proxy:e[o]=n,l&&"object"==typeof l){let e=t.get(l);e&&(e.revoke(),l=e.target)}let i=this.getListeners();if(i.length){let e=this.getPath();e.push(o),this.callListeners(i,void 0!==l?[{type:"update",path:e,value:n,oldValue:l}]:[{type:"insert",path:e,value:n}])}return!0},s.prototype.proxiedArrayGet=function(e,o){const n={pop:function(e,r){let o,n,s;o=e.length-1,(n=e.pop())&&"object"==typeof n&&(s=t.get(n))&&(s.revoke(),n=s.target);let l=r.getListeners();if(l.length){let e=r.getPath();e.push(o),r.callListeners(l,[{type:"delete",path:e,oldValue:n}])}return n},push:function(e,t){let o,n,l,i=arguments.length-2,a=new Array(i),p=[],h=t.getListeners();n=e.length,h.length&&(l=t.getPath());for(let e,o=0;o<i;o++)(e=arguments[o+2])&&"object"==typeof e&&!r.hasOwnProperty(e.constructor.name)&&(e=new s({target:e,ownKey:n+o,parent:t}).proxy),a[o]=e;if(o=Reflect.apply(e.push,e,a),h.length){for(let t=n,r=e.length;t<r;t++){let r=l.slice(0);r.push(t),p[t-n]={type:"insert",path:r,value:e[t]}}t.callListeners(h,p)}return o},shift:function(e,r){let o,n,s=r.getListeners();(o=e.shift())&&"object"==typeof o&&(n=t.get(o))&&(n.revoke(),o=n.target);for(let r,o,n=0,s=e.length;n<s;n++)(r=e[n])&&"object"==typeof r&&((o=t.get(r))?o.ownKey=n:console.error("unexpectedly failed to resolve proxy -> observed"));if(s.length){let e=r.getPath();e.push(0),r.callListeners(s,[{type:"delete",path:e,oldValue:o}])}return o},unshift:function(e,o){let n,l,i,a=o.getListeners(),p=[];(n=Array.from(arguments)).splice(0,2),n.forEach((e,t)=>{e&&"object"==typeof e&&!r.hasOwnProperty(e.constructor.name)&&(n[t]=new s({target:e,ownKey:t,parent:o}).proxy)}),l=Reflect.apply(e.unshift,e,n);for(let r,o=0,n=e.length;o<n;o++)(r=e[o])&&"object"==typeof r&&((i=t.get(r))?i.ownKey=o:console.error("failed to resolve proxy -> observed"));if(a.length){let t,r=o.getPath();for(let o=0,s=n.length;o<s;o++)(t=r.slice(0)).push(o),p.push({type:"insert",path:t,value:e[o]});o.callListeners(a,p)}return l},reverse:function(e,r){let o,n=r.getListeners();e.reverse();for(let r,n=0,s=e.length;n<s;n++)(r=e[n])&&"object"==typeof r&&((o=t.get(r))?o.ownKey=n:console.error("failed to resolve proxy -> observed"));return n.length&&r.callListeners(n,[{type:"reverse",path:r.getPath()}]),r.proxy},sort:function(e,r,o){let n,s=r.getListeners();e.sort(o);for(let r,o=0,s=e.length;o<s;o++)(r=e[o])&&"object"==typeof r&&((n=t.get(r))?n.ownKey=o:console.error("failed to resolve proxy -> observed"));return s.length&&r.callListeners(s,[{type:"shuffle",path:r.getPath()}]),r.proxy},fill:function(e,o){let n,l,i,a,p,h,c,y=o.getListeners(),f=[],u=e.length;(n=Array.from(arguments)).splice(0,2),i=(l=n.length)<2?0:n[1]<0?u+n[1]:n[1],a=l<3?u:n[2]<0?u+n[2]:n[2],p=e.slice(0),Reflect.apply(e.fill,e,n),y.length&&(h=o.getPath());for(let n,l,y,u=i;u<a;u++)(n=e[u])&&"object"==typeof n&&!r.hasOwnProperty(n.constructor.name)&&(e[u]=new s({target:n,ownKey:u,parent:o}).proxy),p.hasOwnProperty(u)?((y=p[u])&&"object"==typeof y&&(l=t.get(y))&&(l.revoke(),y=l.target),(c=h.slice(0)).push(u),f.push({type:"update",path:c,value:e[u],oldValue:y})):((c=h.slice(0)).push(u),f.push({type:"insert",path:c,value:e[u]}));return y.length&&o.callListeners(y,f),o.proxy},splice:function(e,o){let n,l,i,a,p,h,c,y=o.getListeners(),f=[],u=e.length;(n=Array.from(arguments)).splice(0,2),c=n.length;for(let e,t=2;t<c;t++)(e=n[t])&&"object"==typeof e&&!r.hasOwnProperty(e.constructor.name)&&(n[t]=new s({target:e,ownKey:t,parent:o}).proxy);a=0===c?0:n[0]<0?u+n[0]:n[0],p=c<2?u-a:n[1],h=Math.max(c-2,0),l=Reflect.apply(e.splice,e,n),u=e.length;for(let r,o=0;o<u;o++)(r=e[o])&&"object"==typeof r&&((i=t.get(r))?i.ownKey=o:console.error("failed to resolve proxy -> target -> observed"));for(let e,r,o=0,n=l.length;o<n;o++)(e=l[o])&&"object"==typeof e&&(r=t.get(e))&&(r.revoke(),l[o]=r.target);if(y.length){let t,r,n=o.getPath();for(t=0;t<p;t++)(r=n.slice(0)).push(a+t),t<h?f.push({type:"update",path:r,value:e[a+t],oldValue:l[t]}):f.push({type:"delete",path:r,oldValue:l[t]});for(;t<h;t++)(r=n.slice(0)).push(a+t),f.push({type:"insert",path:r,value:e[a+t]});o.callListeners(y,f)}return l}};return n.hasOwnProperty(o)?n[o].bind(void 0,e,this):e[o]},s.prototype.proxiedDelete=function(e,r){let o=e[r];if(delete e[r]){if(o&&"object"==typeof o){let e=t.get(o);e&&(e.revoke(),o=e.target)}let e=this.getListeners();if(e.length){let t=this.getPath();t.push(r),this.callListeners(e,[{type:"delete",path:t,oldValue:o}])}return!0}return!1};Object.defineProperty(e,"Observable",{value:class{static from(e){if(!(!e||"object"!=typeof e||r.hasOwnProperty(e.constructor.name)||"observe"in e||"unobserve"in e||"revoke"in e))return new s({target:e,ownKey:null,parent:null}).proxy;if(!e||"object"!=typeof e)throw new Error("observable MAY ONLY be created from non-null object only");if("observe"in e||"unobserve"in e||"revoke"in e)throw new Error('target object MUST NOT have nor own neither inherited properties from the following list: "observe", "unobserve", "revoke"');if(r.hasOwnProperty(e.constructor.name))throw new Error(e+" found to be one of non-observable object types: "+r)}}})})();